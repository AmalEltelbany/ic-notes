<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>IC Notes - Decentralized Note Taking</title>
  <base href="/" />

  <link rel="icon" href="/favicon.ico" />

  <meta name="description"
    content="Secure, decentralized note-taking application built on the Internet Computer blockchain" />
  <meta name="keywords" content="notes, decentralized, blockchain, Internet Computer, IC, web3" />
  <meta name="author" content="IC Notes" />

  <meta property="og:title" content="IC Notes - Decentralized Note Taking" />
  <meta property="og:description"
    content="Secure, decentralized note-taking application built on the Internet Computer blockchain" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="/og-image.png" />

  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="IC Notes - Decentralized Note Taking" />
  <meta name="twitter:description"
    content="Secure, decentralized note-taking application built on the Internet Computer blockchain" />

  <meta name="theme-color" content="#7c3aed" />

  <link rel="apple-touch-icon" href="/apple-touch-icon.png" />

  <link rel="manifest" href="/manifest.json" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
    rel="stylesheet">

  <script src="https://cdn.tailwindcss.com"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            'sans': ['Inter', 'system-ui', 'sans-serif'],
          },
          colors: {
            'purple': {
              50: '#faf5ff',
              100: '#f3e8ff',
              200: '#e9d5ff',
              300: '#d8b4fe',
              400: '#c084fc',
              500: '#a855f7',
              600: '#9333ea',
              700: '#7c3aed',
              800: '#6b21a8',
              900: '#581c87',
            }
          },
          animation: {
            'fade-in': 'fadeIn 0.5s ease-in-out',
            'slide-up': 'slideUp 0.3s ease-out',
            'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
          },
          keyframes: {
            fadeIn: {
              '0%': { opacity: '0' },
              '100%': { opacity: '1' },
            },
            slideUp: {
              '0%': { transform: 'translateY(10px)', opacity: '0' },
              '100%': { transform: 'translateY(0)', opacity: '1' },
            }
          },
          backdropBlur: {
            xs: '2px',
          },
          boxShadow: {
            'glow': '0 0 20px rgba(168, 85, 247, 0.4)',
            'glow-lg': '0 0 40px rgba(168, 85, 247, 0.6)',
          }
        }
      }
    }
  </script>

  <style>
    /* Custom scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
    }

    ::-webkit-scrollbar-track {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb {
      background: rgba(168, 85, 247, 0.5);
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: rgba(168, 85, 247, 0.7);
    }

    /* Loading animation */
    .loading-dots {
      display: inline-block;
      position: relative;
      width: 80px;
      height: 80px;
    }

    .loading-dots div {
      position: absolute;
      top: 33px;
      width: 13px;
      height: 13px;
      border-radius: 50%;
      background: #a855f7;
      animation-timing-function: cubic-bezier(0, 1, 1, 0);
    }

    .loading-dots div:nth-child(1) {
      left: 8px;
      animation: loading-dots1 0.6s infinite;
    }

    .loading-dots div:nth-child(2) {
      left: 8px;
      animation: loading-dots2 0.6s infinite;
    }

    .loading-dots div:nth-child(3) {
      left: 32px;
      animation: loading-dots2 0.6s infinite;
    }

    .loading-dots div:nth-child(4) {
      left: 56px;
      animation: loading-dots3 0.6s infinite;
    }

    @keyframes loading-dots1 {
      0% {
        transform: scale(0);
      }

      100% {
        transform: scale(1);
      }
    }

    @keyframes loading-dots3 {
      0% {
        transform: scale(1);
      }

      100% {
        transform: scale(0);
      }
    }

    @keyframes loading-dots2 {
      0% {
        transform: translate(0, 0);
      }

      100% {
        transform: translate(24px, 0);
      }
    }

    /* Browser warning styles */
    .browser-warning {
      display: none;
      background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
      color: #92400e;
      padding: 12px 20px;
      text-align: center;
      font-weight: 500;
      border-bottom: 1px solid #f59e0b;
      animation: slide-down 0.3s ease-out;
    }

    .browser-warning.show {
      display: block;
    }

    @keyframes slide-down {
      from {
        transform: translateY(-100%);
        opacity: 0;
      }

      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    /* Ensure smooth transitions */
    * {
      transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;
      transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
      transition-duration: 150ms;
    }

    /* Glassmorphism helper */
    .glass {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    /* Gradient text */
    .gradient-text {
      background: linear-gradient(135deg, #a855f7 0%, #ec4899 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    /* Initial loading screen */
    .initial-loading {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #0f172a 0%, #7c2d92 50%, #0f172a 100%);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      transition: opacity 0.5s ease-out, visibility 0.5s ease-out;
    }

    .initial-loading.fade-out {
      opacity: 0;
      visibility: hidden;
    }

    .logo-pulse {
      animation: logo-pulse 2s ease-in-out infinite;
    }

    @keyframes logo-pulse {

      0%,
      100% {
        transform: scale(1);
        opacity: 0.8;
      }

      50% {
        transform: scale(1.05);
        opacity: 1;
      }
    }
  </style>
</head>

<body class="font-sans">
  <div id="initialLoading" class="initial-loading">
    <div class="text-center">
      <div
        class="w-20 h-20 bg-gradient-to-r from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center mb-6 mx-auto logo-pulse shadow-glow">
        <span class="text-5xl text-white">üìù</span>
      </div>
      <h1 class="text-4xl font-bold gradient-text mb-4">IC Notes</h1>
      <div class="loading-dots">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
      </div>
      <p class="text-purple-200 mt-6">Connecting to Internet Computer...</p>
    </div>
  </div>

  <div id="browserWarning" class="browser-warning">
    ‚ö†Ô∏è For the best experience, please use Chrome, Firefox, or Safari. If you're experiencing issues, try refreshing the
    page.
  </div>

  <div id="root" class="min-h-screen"></div>

  <script>
    // Register service worker for PWA functionality
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then((registration) => {
            console.log('SW registered: ', registration);
          })
          .catch((registrationError) => {
            console.log('SW registration failed: ', registrationError);
          });
      });
    }
  </script>

  <script>
    // Browser detection and compatibility warning
    function detectBrowser() {
      const userAgent = navigator.userAgent;
      const isChrome = /Chrome/.test(userAgent) && /Google Inc/.test(navigator.vendor);
      const isFirefox = /Firefox/.test(userAgent);
      const isSafari = /Safari/.test(userAgent) && /Apple Computer/.test(navigator.vendor);
      const isEdge = /Edg/.test(userAgent);

      if (!isChrome && !isFirefox && !isSafari && !isEdge) {
        document.getElementById('browserWarning').classList.add('show');
      }
    }

    // Check for WebAssembly support
    function checkWebAssembly() {
      try {
        if (typeof WebAssembly === "object" && typeof WebAssembly.instantiate === "function") {
          const module = new WebAssembly.Module(Uint8Array.of(0x0, 0x61, 0x73, 0x6d, 0x01, 0x00, 0x00, 0x00));
          if (module instanceof WebAssembly.Module) return true;
        }
      } catch (e) { }
      return false;
    }

    // Initialize compatibility checks
    document.addEventListener('DOMContentLoaded', function () {
      detectBrowser();

      if (!checkWebAssembly()) {
        document.getElementById('browserWarning').innerHTML = '‚ö†Ô∏è Your browser does not support WebAssembly. Please update your browser or try a different one.';
        document.getElementById('browserWarning').classList.add('show');
      }
    });

    // Hide initial loading screen after a delay
    window.addEventListener('load', function () {
      setTimeout(() => {
        const loadingScreen = document.getElementById('initialLoading');
        loadingScreen.classList.add('fade-out');
        setTimeout(() => {
          loadingScreen.style.display = 'none';
        }, 500);
      }, 1500);
    });

    // Performance monitoring
    window.addEventListener('load', function () {
      setTimeout(() => {
        if (window.performance && window.performance.timing) {
          const loadTime = window.performance.timing.loadEventEnd - window.performance.timing.navigationStart;
          console.log(`Page load time: ${loadTime}ms`);
        }
      }, 0);
    });

    // Error boundary for better error handling
    window.addEventListener('error', function (e) {
      console.error('Global error:', e.error);
      // You could send this to an error reporting service
    });

    window.addEventListener('unhandledrejection', function (e) {
      console.error('Unhandled promise rejection:', e.reason);
      // You could send this to an error reporting service
    });
  </script>

  <script type="module" src="/src/main.jsx"></script>
</body>

</html>